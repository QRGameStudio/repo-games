<!DOCTYPE html><meta content=1.1 name=gv><meta content=qrs.snake name=gi><meta content=SNAKEYR name=gs><title>Snake</title><meta content="width=device-width,initial-scale=1"name=viewport><style>div{position:absolute}#game-content,body,html{width:100%;height:100%;background-color:var(--theme-primary);color:var(--theme-contrast)}.pg{background-color:#9acd32;top:9vh;border:8px solid #523000}.dirBtn{background-color:transparent;height:100vh;width:50vw}.right{left:50vw}.snkPart{background-color:green;border:1px solid #000}.food{background-color:red;border:1px solid #000}.go{width:100vw;height:100vh;top:0;left:0;background-color:rgba(79,79,79,.3);padding-top:45vh;text-align:center;font-size:xx-large}.sBox{font-weight:700;font-size:x-large;padding-left:4vw;padding-top:2vh}</style><script>var t=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},e=function(){return function(){var e=this;this.move=function(){for(var n=e.body.length-1;n>0;n--)e.body[n]=t([],e.body[n-1],!0);var o="LEFT"===e.direction?e.body[0][0]-1:"RIGHT"===e.direction?e.body[0][0]+1:e.body[0][0],i="UP"===e.direction?e.body[0][1]-1:"DOWN"===e.direction?e.body[0][1]+1:e.body[0][1];e.body[0]=[o,i]},this.turn=function(t){var n="LEFT"===t?1:-1,o=["UP","LEFT","DOWN","RIGHT"];e.direction=o[(o.indexOf(e.direction)+4+n)%4]},this.grow=function(){e.body=t(t([],e.body,!0),[t([],e.body[e.body.length-1],!0)],!1)},this.getBody=function(){return t([],e.body,!0)},this.getLength=function(){return e.body.length},this.initialLength=4,this.direction="UP",this.body=[[5,5],[5,6],[5,7],[5,8]]}}(),n=function(){return function(t){var e=this;this.regenerate=function(){for(var t=function(){var t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if(0===e.snake.getBody().filter(function(e){return e[0]===t&&e[1]===n}).length)return e.position=[t,n],{value:void 0}};;){var n=t();if("object"==typeof n)return n.value}},this.snake=t,this.regenerate()}}(),o=function(){return function(t,e){var n=this;this.createPlayground=function(t){var e=10*Math.floor((.8*Math.min(t.getBoundingClientRect().width,t.getBoundingClientRect().height)-16)/10)+16,n=document.createElement("div");return n.className="pg",n.style.width="".concat(e,"px"),n.style.height="".concat(e,"px"),n.style.left="".concat(Math.floor((t.getBoundingClientRect().width-e)/2),"px"),t.appendChild(n),n},this.createScoreBox=function(t){var e=document.createElement("div");return e.className="sBox",t.appendChild(e),e},this.clearPlayground=function(){n.playground.innerHTML=""},this.setRectDimensions=function(t,e){var o=Math.floor(.1*(n.playground.getBoundingClientRect().width-16));t.style.left="".concat(o*e[0],"px"),t.style.top="".concat(o*e[1],"px"),t.style.width="".concat(o,"px"),t.style.height="".concat(o,"px")},this.drawFood=function(){var t=document.createElement("div");t.className="food",n.setRectDimensions(t,n.game.food.position),n.playground.appendChild(t)},this.drawSnake=function(){n.game.snake.getBody().forEach(function(t){var e=document.createElement("div");e.className="snkPart",n.setRectDimensions(e,t),n.playground.appendChild(e)})},this.updateScore=function(){n.scoreBox.innerHTML="SCORE: ".concat(n.game.getScore()," (").concat(n.game.getHighScore()||0,")")},this.draw=function(){n.clearPlayground(),n.drawFood(),n.drawSnake(),n.updateScore()},this.game=t,this.playground=this.createPlayground(e),this.scoreBox=this.createScoreBox(e)}}(),i=function(){return function(t){var i=this;this.testGameOver=function(){if(i.snake.getLength()>=100)return!0;if(i.snake.getBody()[0][0]<0||i.snake.getBody()[0][0]>9||i.snake.getBody()[0][1]<0||i.snake.getBody()[0][1]>9)return!0;for(var t=1;t<i.snake.getBody().length;t++)if(i.snake.getBody()[t][0]===i.snake.getBody()[0][0]&&i.snake.getBody()[t][1]===i.snake.getBody()[0][1])return!0;return!1},this.eat=function(){i.food.position[0]===i.snake.getBody()[0][0]&&i.food.position[1]===i.snake.getBody()[0][1]&&(i.snake.grow(),i.snake.getLength()<100&&i.food.regenerate(),(new GSongLib).play("good"))},this.saveHighScore=function(){new GStorage("QRSnk").set("HS",Math.max(i.getScore(),i.highScore).toString())},this.loadHighScore=function(){new GStorage("QRSnk").get("HS",0).then(function(t){return i.highScore=parseInt(t)})},this.getHighScore=function(){return i.highScore},this.getScore=function(){return i.snake.getLength()-i.snake.initialLength},this.tick=function(){return i.snake.move(),i.eat(),i.testGameOver()?(i.saveHighScore(),(new GSongLib).play("fail"),!0):(i.gameView.draw(),!1)},this.snake=new e,this.food=new n(this.snake),this.gameView=new o(this,t),this.loadHighScore()}}(),r=function(){var t=document.getElementById("game-content");t.innerHTML="";var e=new i(t);!function(t,e){["LEFT","RIGHT"].forEach(function(n){var o=document.createElement("div");o.className="dirBtn "+n.toLowerCase(),o.onclick=function(){return t.snake.turn(n)},e.appendChild(o)})}(e,t),a(e)},a=function(t){var e;(new GTheme).apply(),t.tick()?((e=document.createElement("div")).innerHTML="GAME OVER",e.className="go",e.onclick=function(t){r()},document.getElementById("game-content").appendChild(e)):setTimeout(function(){return a(t)},500)};window.onload=r;</script><div id=game-content></div>